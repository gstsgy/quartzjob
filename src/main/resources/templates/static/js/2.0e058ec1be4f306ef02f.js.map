{"version":3,"sources":["webpack:///./src/pages/Home.vue?029e","webpack:///./src/pages/Home.vue?2467","webpack:///./src/pages/Home.vue?aaa9","webpack:///src/pages/Home.vue","webpack:///./src/pages/Home.vue"],"names":["__WEBPACK_IMPORTED_MODULE_0__node_modules_extract_text_webpack_plugin_dist_loader_js_ref_7_0_node_modules_vue_style_loader_index_js_node_modules_css_loader_index_js_ref_7_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_7_3_node_modules_less_loader_dist_cjs_js_ref_7_4_node_modules_vue_loader_lib_index_js_vue_loader_options_Home_vue_vue_type_style_index_0_lang_less___","__webpack_require__","n","pages_Homevue_type_script_lang_js_","name","data","_this","this","total","isSelected","formFilter","pageSize","pageNum","columns","type","key","width","align","title","minWidth","render","h","params","index","slot","props","disabled","row","jobStatus","on","click","e","_axios","tableData","tableHeight","modalTitle","modal","modalForm","modalValidate","jobName","required","message","trigger","cronExpression","targeturl","created","mounted","window","innerHeight","$refs","table","$el","offsetTop","getData","debounce","computed","methods","num","_this2","length","$Message","warning","changeJobStatus","console","log","submit","showUpdate","update","error","_this3","validate","valid","success","showInsert","insert","_this4","deleteConfirm","_this5","$root","mes1","then","res","getSelection","portOut","$axios","get","blob","Blob","link","document","createElement","style","display","url","URL","createObjectURL","href","setAttribute","body","appendChild","removeChild","revokeObjectURL","portIn","_this6","formData","FormData","append","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","label-width","model","value","callback","$$v","expression","span","label","clearable","on-change","$event","$set","_v","shape","staticStyle","action","before-upload","icon","ref","height","border","stripe","on-row-dblclick","on-selection-change","scopedSlots","_u","fn","true-value","false-value","rules","prop","__webpack_exports__"],"mappings":"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","file":"static/js/2.0e058ec1be4f306ef02f.js","sourcesContent":["export * from \"-!../../node_modules/extract-text-webpack-plugin/dist/loader.js??ref--7-0!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/index.js??ref--7-2!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--7-3!../../node_modules/less-loader/dist/cjs.js??ref--7-4!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=less&\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Home.vue?vue&type=style&index=0&lang=less&\n// module id = F1BO\n// module chunks = 2","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('Form',{attrs:{\"label-width\":100},model:{value:(_vm.formFilter),callback:function ($$v) {_vm.formFilter=$$v},expression:\"formFilter\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"4\"}},[_c('FormItem',{attrs:{\"label\":\"任务名称\"}},[_c('Input',{attrs:{\"clearable\":\"\"},on:{\"on-change\":function($event){return _vm.getData(1)}},model:{value:(_vm.formFilter.name),callback:function ($$v) {_vm.$set(_vm.formFilter, \"name\", $$v)},expression:\"formFilter.name\"}})],1)],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"spaceBetween bottomSpace\"},[_c('div',[_c('Button',{staticClass:\"btnForm\",attrs:{\"shape\":\"circle\",\"type\":_vm.isSelected?'error':'default'},on:{\"click\":_vm.deleteConfirm}},[_vm._v(\"删除选中项\")])],1),_vm._v(\" \"),_c('div',[_c('Button',{staticClass:\"btnForm\",attrs:{\"shape\":\"circle\",\"type\":\"primary\"},on:{\"click\":_vm.portOut}},[_vm._v(\"导出\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"inline-block\"}},[_c('Upload',{attrs:{\"action\":\"\",\"before-upload\":_vm.portIn}},[_c('Button',{attrs:{\"icon\":\"ios-cloud-upload-outline\"}},[_vm._v(\"导入\")])],1)],1),_vm._v(\" \"),_c('Button',{staticClass:\"btnForm\",attrs:{\"shape\":\"circle\",\"type\":\"primary\"},on:{\"click\":_vm.showInsert}},[_vm._v(\"新增\")])],1)]),_vm._v(\" \"),_c('Table',{ref:\"table\",attrs:{\"height\":_vm.tableHeight,\"border\":\"\",\"stripe\":\"\",\"columns\":_vm.columns,\"data\":_vm.tableData},on:{\"on-row-dblclick\":_vm.showUpdate,\"on-selection-change\":function (e){ return _vm.isSelected = e.length>0; }},scopedSlots:_vm._u([{key:\"jobStatus\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [_c('i-switch',{attrs:{\"true-value\":1,\"false-value\":0},on:{\"on-change\":function($event){return _vm.changeJobStatus(row)}},model:{value:(row.jobStatus),callback:function ($$v) {_vm.$set(row, \"jobStatus\", $$v)},expression:\"row.jobStatus\"}})]}}])}),_vm._v(\" \"),_c('Modal',{attrs:{\"width\":\"1000\",\"title\":_vm.modalTitle},model:{value:(_vm.modal),callback:function ($$v) {_vm.modal=$$v},expression:\"modal\"}},[_c('Form',{ref:\"modalForm\",attrs:{\"model\":_vm.modalForm,\"label-width\":100,\"rules\":_vm.modalValidate}},[_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('FormItem',{attrs:{\"label\":\"任务名称\",\"prop\":\"jobName\"}},[_c('Input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.modalForm.jobName),callback:function ($$v) {_vm.$set(_vm.modalForm, \"jobName\", $$v)},expression:\"modalForm.jobName\"}})],1)],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"12\"}},[_c('FormItem',{attrs:{\"label\":\"任务描述\",\"prop\":\"jobDesc\"}},[_c('Input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.modalForm.jobDesc),callback:function ($$v) {_vm.$set(_vm.modalForm, \"jobDesc\", $$v)},expression:\"modalForm.jobDesc\"}})],1)],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"12\"}},[_c('FormItem',{attrs:{\"label\":\"cron表达式\",\"prop\":\"cronExpression\"}},[_c('Input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.modalForm.cronExpression),callback:function ($$v) {_vm.$set(_vm.modalForm, \"cronExpression\", $$v)},expression:\"modalForm.cronExpression\"}})],1)],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"12\"}},[_c('FormItem',{attrs:{\"label\":\"执行接口\",\"prop\":\"targeturl\"}},[_c('Input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.modalForm.targeturl),callback:function ($$v) {_vm.$set(_vm.modalForm, \"targeturl\", $$v)},expression:\"modalForm.targeturl\"}})],1)],1)],1)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"primary\",\"shape\":\"circle\"},on:{\"click\":_vm.submit}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/Home.vue?vue&type=template&id=77f8d44c&\n// module id = null\n// module chunks = ","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Home.vue?vue&type=script&lang=js&\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"home\">\r\n    <Form v-model=\"formFilter\" :label-width=\"100\">\r\n      <Row>\r\n       <!-- <Col span=\"4\">\r\n          <FormItem label=\"任务id\">\r\n            <Input v-model=\"formFilter.id\" clearable @on-change=\"getData(1)\"></Input>\r\n          </FormItem>\r\n        </Col> -->\r\n        <Col span=\"4\">\r\n          <FormItem label=\"任务名称\">\r\n            <Input v-model=\"formFilter.name\" clearable @on-change=\"getData(1)\"></Input>\r\n          </FormItem>\r\n        </Col>\r\n        <!-- <Col span=\"4\">\r\n          <FormItem label=\"任务状态\">\r\n            <Input v-model=\"formFilter.jobStatus\" clearable @on-change=\"getData(1)\"></Input>\r\n          </FormItem>\r\n        </Col> -->\r\n      </Row>\r\n    </Form>\r\n    <div class=\"spaceBetween bottomSpace\">\r\n      <div>\r\n        <Button shape=\"circle\" @click=\"deleteConfirm\" class=\"btnForm\" :type=\"isSelected?'error':'default'\">删除选中项</Button>\r\n      </div>\r\n      <div>\r\n        <Button shape=\"circle\" class=\"btnForm\" type=\"primary\" @click=\"portOut\">导出</Button>\r\n        <div style=\"display: inline-block;\">\r\n          <Upload action=\"\" :before-upload=\"portIn\">\r\n              <Button icon=\"ios-cloud-upload-outline\">导入</Button>\r\n          </Upload>\r\n        </div>\r\n        <Button shape=\"circle\" class=\"btnForm\" type=\"primary\" @click=\"showInsert\">新增</Button>\r\n      </div>\r\n    </div>\r\n    <Table ref=\"table\" :height=\"tableHeight\" border stripe :columns=\"columns\" :data=\"tableData\" @on-row-dblclick=\"showUpdate\" @on-selection-change=\"e=>isSelected = e.length>0\">\r\n      <template slot-scope='{row,index}' slot=\"jobStatus\" >\r\n        <i-switch v-model=\"row.jobStatus\" :true-value=\"1\" @on-change=\"changeJobStatus(row)\" :false-value=\"0\"></i-switch>\r\n      </template>\r\n    </Table>\r\n    <!-- <div class=\"page topSpace\">\r\n      <Page :total=\"total\" show-total show-elevator show-sizer transfer :current=\"formFilter.pageNum\" :page-size=\"formFilter.pageSize\" :page-size-opts=\"[10,20,30]\"></Page>\r\n    </div> -->\r\n    \r\n    <Modal v-model=\"modal\" width=\"1000\" :title=\"modalTitle\">\r\n      <Form :model=\"modalForm\" :label-width=\"100\" ref=\"modalForm\" :rules=\"modalValidate\">\r\n        <Row>\r\n          <Col span=\"12\">\r\n            <FormItem label=\"任务名称\" prop=\"jobName\">\r\n              <Input v-model=\"modalForm.jobName\" clearable></Input>\r\n            </FormItem>\r\n          </Col>\r\n          <Col span=\"12\">\r\n            <FormItem label=\"任务描述\" prop=\"jobDesc\">\r\n              <Input v-model=\"modalForm.jobDesc\" clearable></Input>\r\n            </FormItem>\r\n          </Col>\r\n          <Col span=\"12\">\r\n            <FormItem label=\"cron表达式\" prop=\"cronExpression\">\r\n              <Input v-model=\"modalForm.cronExpression\" clearable></Input>\r\n            </FormItem>\r\n          </Col>\r\n          <Col span=\"12\">\r\n            <FormItem label=\"执行接口\" prop=\"targeturl\">\r\n              <Input v-model=\"modalForm.targeturl\" clearable></Input>\r\n            </FormItem>\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n      \r\n      <div slot=\"footer\">\r\n        <Button type=\"primary\" shape=\"circle\" @click=\"submit\">提交</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\n</template>\n\n<script>\r\n  export default{\r\n    name:\"Home\",\r\n    data(){\r\n      return{\r\n        total:0,\r\n        isSelected:false,\r\n        \r\n        formFilter:{\r\n          pageSize:20,\r\n          pageNum:1\r\n        },\r\n        columns:[\r\n          {\r\n            type:\"selection\",\r\n            key:\"select\",\r\n            width:60,\r\n            align:\"center\"\r\n          },\r\n          {\r\n            title:\"序号\",\r\n            key:\"index\",\r\n            minWidth:80,\r\n            align:\"center\",\r\n            render:(h,params)=>{\r\n              return h('div',this.formFilter.pageSize*(this.formFilter.pageNum-1)+1+params.index)\r\n            }\r\n          },\r\n          {\r\n            title:\"任务id\",\r\n            key:\"id\",\r\n            align:\"center\",\r\n            minWidth:100,\r\n          },\r\n          {\r\n            title:\"任务名称\",\r\n            key:\"jobName\",\r\n            align:\"center\",\r\n            minWidth:100,\r\n          },\r\n          {\r\n            title:\"任务描述\",\r\n            key:\"jobDesc\",\r\n            align:\"center\",\r\n            minWidth:100,\r\n          },\r\n          {\r\n            title:\"cron表达式\",\r\n            key:\"cronExpression\",\r\n            align:\"center\",\r\n            minWidth:180,\r\n          },\r\n          {\r\n            title:\"执行接口\",\r\n            key:\"targeturl\",\r\n            align:\"center\",\r\n            minWidth:200,\r\n          },\r\n          {\r\n            title:\"任务状态\",\r\n            key:\"jobStatus\",\r\n            align:\"center\",\r\n            minWidth:100,\r\n            slot:\"jobStatus\"\r\n          },\r\n          {\r\n            title:\"创建时间\",\r\n            key:\"createTime\",\r\n            align:\"center\",\r\n            minWidth:180,\r\n          },\r\n          {\r\n            title:\"更新时间\",\r\n            key:\"updateTime\",\r\n            align:\"center\",\r\n            minWidth:180,\r\n          },\r\n          {\r\n            title:\"执行\",\r\n            align:\"center\",\r\n            minWidth:150,\r\n            render:(h,params)=>{\r\n              return h('Button',{\r\n                props:{\r\n                  type:\"primary\",\r\n                  disabled:params.row.jobStatus==0\r\n                },\r\n                on:{\r\n                  \"click\":e=>{\r\n                    this._axios(\"put\",\"run\",params.row)\r\n                  }\r\n                }\r\n              },\"运行一次\")\r\n            }\r\n          }\r\n        ],\r\n        tableData:[],\r\n        tableHeight:400,\r\n        \r\n        modalTitle:\"新增定时任务\",\r\n        modal:false,\r\n        modalForm:{},\r\n        modalValidate:{\r\n          jobName:[\r\n            {required:true,message:\"任务名称不可为空\",trigger:\"change\"}\r\n          ],\r\n          cronExpression:[\r\n            {required:true,message:\"cron表达式不可为空\",trigger:\"change\"}\r\n          ],\r\n          targeturl:[\r\n            {required:true,message:\"执行接口不可为空\",trigger:\"change\"}\r\n          ]\r\n          // 'jobStatus':[\r\n          //   {required:true,message:\"任务状态不可为空\",trigger:\"change\"}\r\n          // ]\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      \r\n    },\r\n    mounted() {\r\n      this.tableHeight = window.innerHeight - this.$refs.table.$el.offsetTop-140\r\n      this.getData()\r\n      this.getData = this.debounce(this.getData)\r\n    },\r\n    computed:{\r\n    },\r\n    methods:{\r\n      getData(num){\r\n        if(num){\r\n          this.formFilter.pageNum = num\r\n        }\r\n        this._axios(\"get\",\"jobs\",this.formFilter,data=>{\r\n          this.tableData = data;\r\n          this.total = data.length;\r\n          if(data.length<1){\r\n            this.$Message.warning(\"暂无符合条件的数据\")\r\n          }\r\n        })\r\n      },\r\n      changeJobStatus(e){\r\n        console.log(e)\r\n        this._axios(\"put\",\"jobstatus\",e,data=>{\r\n          \r\n        })\r\n        this.getData()\r\n      },\r\n      submit(){},\r\n      showUpdate(e){\r\n        if(e.jobStatus ==0){\r\n          this.modalForm = e;\r\n          this.modalTitle = \"更新定时任务\"\r\n          this.submit = this.update\r\n          this.modal = true;\r\n        }else{\r\n          this.$Message.error(\"任务状态为开启时，不可修改\")\r\n        }\r\n        \r\n      },\r\n      update(){\r\n        this.$refs.modalForm.validate(valid=>{\r\n          if(valid){\r\n            this._axios(\"put\",\"job\",this.modalForm,data=>{\r\n              if(data){\r\n                this.$Message.success(\"更新成功\")\r\n                this.modal = false;\r\n                this.getData()\r\n              }else{\r\n                this.$Message.error(\"更新失败\")\r\n              }\r\n            })\r\n          }\r\n        })\r\n        \r\n      },\r\n      showInsert(){\r\n        this.modalForm = {jobStatus:1}\r\n        this.modalTitle = \"新增定时任务\"\r\n        this.submit = this.insert\r\n        this.modal = true\r\n      },\r\n      insert(){\r\n        this.$refs.modalForm.validate(valid=>{\r\n          if(valid){\r\n            this._axios(\"post\",\"job\",this.modalForm,data=>{\r\n              if(data){\r\n                this.$Message.success(\"新增成功\")\r\n                this.modal = false;\r\n                this.getData()\r\n              }else{\r\n                this.$Message.error(\"新增失败\")\r\n              }\r\n            })\r\n          }\r\n        })\r\n        \r\n      },\r\n      deleteConfirm(){\r\n        if(!this.isSelected){\r\n          this.$Message.error(\"请选择数据\")\r\n        }else{\r\n          this.$root.mes1(\"warn\",\"是否确定删除？\").then(res=>{\r\n            if(res){\r\n              this._axios('delete',\"jobs\",this.$refs.table.getSelection(),data=>{\r\n                if(data){\r\n                  this.$Message.success(\"删除成功\")\r\n                  this.getData()\r\n                  this.isSelected = false;\r\n                }else{\r\n                  this.$Message.error(\"删除失败\")\r\n                }\r\n              })\r\n            }\r\n          })\r\n        }\r\n      },\r\n      portOut(){\r\n        this.$axios.get(\"down\").then(res=>{\r\n          let blob = new Blob([res])\r\n          const link = document.createElement('a')\r\n          link.style.display = 'none'\r\n          let url = window.URL.createObjectURL(blob)\r\n          link.href = url\r\n          link.setAttribute('download',\"导出.txt\")\r\n          document.body.appendChild(link)\r\n          link.click()\r\n          document.body.removeChild(link)\r\n          window.URL.revokeObjectURL(url)\r\n        })\r\n      },\r\n      portIn(e){\r\n        var formData = new FormData()\r\n        formData.append(\"file\",e)\r\n        this._axios(\"put\",\"upload\",formData,data=>{\r\n          this.$Message.success(\"导入成功\")\r\n        })\r\n        // this.$axios.put(\"upload\",formData).then(res=>{\r\n        //   console.log(res)\r\n        //   if(res.code == 0){\r\n        //     this.$Message.success(\"导入成功\")\r\n        //   }else{\r\n        //     this.$Message.error(res.message)\r\n        //   }\r\n        // }).catch(err=>{\r\n        //   console.log(err)\r\n        // })\r\n        return false\r\n      }\r\n      \r\n    }\r\n  }\n</script>\n\n<style lang=\"less\">\r\n  .home{\r\n    position: relative;\r\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Home.vue","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=77f8d44c&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Home.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}